(function(a,b,c){a.creditCardTypes={visa_electron:{pattern:/^(4026|417500|4405|4508|4844|491(3|7))/,valid_length:[16]},visa:{pattern:/^4/,valid_length:[16]},mastercard:{pattern:/^5[1-5]/,valid_length:[16]},maestro:{pattern:/^(5018|5020|5038|5893|6304|6759|676[1-3]|0604)/,valid_length:[12,13,14,15,16,17,18,19]}};var d=function(b){var c=[];return a.each(b,function(a){c.push(a)}),c},e=function(b,d,e){var f;return a.each(d,function(a,d){return f=e[d],f&&f.pattern.test(b)?(f.name=d,!1):(f=c,c)}),f},f=function(a){var f,b=0,c=a.length,d=c%2,e=0;for(e;c>e;e++)f=parseInt(a.charAt(e)),e%2===d&&(f*=2),f>9&&(f-=9),b+=f;return 0===b%10},g=function(b,c){return a.inArray.call(b.length,c)>-1},h=function(a){return a.replace(/[^\d]+/g,"")};a.validateCreditCard=function(c,i){var j,k,l,m={card_type:null,luhn_valid:!1,length_valid:!1,length_too_long:!1};return c=h(c),i=i||{},j=i.accept||d(a.creditCardTypes),k=e(c,j,a.creditCardTypes),k&&(l=Math.max.apply(b,k.valid_length),m={card_type:k,luhn_valid:f(c),length_valid:g(c,k.valid_length),length_too_long:h(c).length>l}),m},a.fn.validateCreditCard=function(b,c){var d=function(){var g,d=a(this),e=d.val(),f=h(e);f&&(g=a.validateCreditCard(f,c),b.call(d,g))};return $input.on("keyup",function(){d.call(this)}),d(),$input}})(jQuery,window);